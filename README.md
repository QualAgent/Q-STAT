# Q-STAT 품질 에이전트

---

## 1. 개요

### 1.1. 제품 정의

복잡하게 얽힌 4M(설비, 자재, 공법, 사람) 변수 중, 엔지니어의 직관(Human-in-the-loop)과 통계적 검증을 결합하여, 허위 상관관계를 걸러내고 실제 불량을 유발한 핵심 원인만을 정밀하게 포착하는 품질 분석 에이전트

---

## 2. 문제 정의(As-Is VS To-Be)

### 2.1. 추진 배경 및 현황

현재 제조 공정의 품질 이상 분석 업무는 엔지니어 개인의 역량과 수작업에 의존하고 있어, 분석의 **신속성**과 **정확성** 확보에 한계가 존재함.

- **Pain Point 1: 데이터의 파편화 및 비효율적 전처리**
실시간으로는 MES, FDC, MI 데이터가 물리적으로 분리되어 있어, 통계 분석을 위한 Lot 단위 데이터 조회 및 전처리 작업에 전체 분석 시간의 60% 이상이 소요됨.
- **Pain Point 2: 직관에 의존한 의사결정**
    - 통계적 검증 없이 경험적 추론("지난번엔 가스 문제였으니 이번에도 가스겠지")에 의존하여, 오판 및 불필요한 부품 교체 비용 발생.
- **Pain Point 3: 높은 업무 부하**
    - 다발적인 알람 발생 시, 우선순위 선정이 어렵고 단순 반복적인 로그 조회 업무로 인해 엔지니어의 피로도 누적 및 핵심 업무(수율 개선) 집중도 저하.

### 2.2. As-Is VS To-Be

| **단계 (DMAIC)** | **As-Is (엔지니어의 수동 분석)** | **To-Be (AI 에이전트와 협업 분석)** |  |
| --- | --- | --- | --- |
| **D**efine
(문제 정의) |  알람 수신 후 설비 이력(History) 조회
• 경험칙상 알람 발생 시점 부근의 주요 이벤트 2건(가스, PM) 식별 | • 알람과 동시에 이벤트 2건이 포함된
요약 리포트 수신 (Context 파악 완료) | **탐색 시간 단축**
 |
| **M**easure
(데이터 수집) | • FDC, 계측 데이터를 CSV로 각각 다운로드
• 엑셀/Spotfire에서 Key(Time/Wafer) 매핑
 | • 에이전트가 타임스탬프 기준으로 이벤트-계측 데이터 매핑하여 제공 | **전처리 자동화**
 |
| **A**nalyze
(원인 분석) | • JMP/Minitab 실행
• 가설 1(가스) 검증 → 기각 (20분 소요)
• 가설 2(PM) 검증 → **채택** (20분 소요) | • **동시적 스크리닝 가능**
• 엔지니어: *"가스랑 PM 둘 다 p-value 구해봐"*
• AI agent: 가스(0.45) vs **PM(0.001)** 동시 비교 제시
• 유력 후보 즉시 식별 | **검증  업무 속도 대폭 감소** |
| **I**mprove
(개선 대책) | • 분석 결과 확인 후 링 교체 결정
• 판단은 문제 없으나, 분석 시간만큼 조치 지연 | • 분석 대기 시간 없이 즉시 교체 결정
• 골든 타임 확보로 수율 손실 최소화 | **리드타임 단축** |
| **C**ontrol
(관리/보고) | • JMP 차트 캡처하여 보고서(8D, OCAP) 등 작성
• 분석 로직이 개인의 노하우로만 남음 | • 통계 분석 및 조치 내역 구조를 레포트로 작성하여 저장함.
• 이후 유사 불량 발생 시 AI가 먼저 기존 분석 방법 제안함 | **지식 공유** |

---

## 3. 사용 Data 정의

### 3.1. 계측 데이터 (Metrology / MI)

- **역할:** 불량의 구체적인 양상을 파악하는 공정 결과 계측 데이터
예시
    
    
    | **컬럼명** | **데이터 타입** | **설명** |
    | --- | --- | --- |
    | **Lot ID(lot_id)** | String | Lot ID |
    | **웨이퍼 ID(wafer_id)** | String | 웨이퍼 ID |
    | **측정 위치(site_loc)** | String | 측정 포인트 (Center / Middle / Edge) |
    | **계측값 (cd_value)** | Float | 식각 후 선폭 측정값 (단위: nm) |

### 3.2. 설비 보전 이력 (MES) (mi data 기간 외에도 더 과거도 필요함)

- **역할:** 불량의 원인 후보 중 부품 노후화를 검증하기 위한 데이터로 엔지니어의 정비 활동을 기록한 PM 이력 데이터
    
    
    | **컬럼명** | 데이터 타입 | 설명 |
    | --- | --- | --- |
    | Date(date) | Date | PM 날짜 |
    | 장비 ID (eqp_id) | String | 장비 ID |
    | PM 유형(pm_type) | String | PM 사유 및 세부 내용 (ex. Parts_Replace) |
    | 교체 부품(part_id) | String | 파트명 |
    | 작업자(operator) | String | 설비 보전 진행한 작업자 |
    | 특이사항(comment) | String | 보전 작업 세부 내용 및 특이사항(작업자 별 페르소나가 포함된 온전한 문장) |

### 3.3. 설비 센서 데이터 (FDC)

- **역할:** 불량의 원인 후보 중 설비 이상을 검증하기 위한 데이터(문제가 없을 데이터)
    
    
    | **컬럼명** | **데이터 타입** | **설명** |
    | --- | --- | --- |
    | etch_run_id(lot_id) | String | etch_run_id |
    | 챔버 압력(pressure) | Float | 공정 중 평균 압력 (Torr) |
    | 척 온도(temp_chuck) | Float | 웨이퍼 척킹 온도 (℃) |
    | RF 파워(bias_power) | Float | 하부 전극 Bias Power (W) |
    | source_power | Float | 상부 전극 Source RF Power (W) |
    | gas_flow_total | Float | 전체 공정 가스 유량 합 (sccm) |
    | helium_backside_pressure | Float | He backside cooling 압력 (Torr) |

### 3.4. 파트 BOM / 현업에서 어떤 형태가 많은지 파악 필요, 문서형태가 많을 수도 있음

- **역할:** 부품의 **스펙(Spec)과 수명 기준**을 정의(2번과 연계됨)
    
    
    | **컬럼명** | **데이터 타입** | **설명** |
    | --- | --- | --- |
    | 장비명(eqp_model) | String | CNT_ETCHER_V1 |
    | 파트 id(part_id) | String | P_001 |
    | 파트명(part_name) | String | **Focus_Ring_Quartz** |
    | 파트 수명(life_limit) | Float | **1,000** |
    | 단위(unit) | String | Count (매) |

---

## 4. 사용자 시나리오 및 워크 플로우

### 4.1. Agent R&R

| **에이전트** | **분석 시 역할 (Read/Analyze)** | **학습 시 역할 (Write/Learn)** |
| --- | --- | --- |
| **Orchestrator - 지웅** | 전체 조율 및 최종 리포트 작성 | 엔지니어의 피드백 수신 및 전체 학습 프로세스 지휘 |
| **Data monitor - 지웅** | 4M/PARA 데이터 수집 및 정제 | 분석 당시의 데이터 스냅샷(Raw Context) 제공 |
| **Stat analyzer - 세연** | 통계적 유의성 및 패턴 분석 | (학습 시에는 직접 개입 없음) |
| **Docs researcher
(검색 결과, 검색데이터 기반 답변 증강) - 현도** | 과거 사례 검색 및 vectorDB 조회 | 검색 결과 및 과거 이력 전송 |
| **Strategy advisor - 도희** | 조치 옵션 생성 및 시뮬레이션 | 선택된 옵션의 성패 여부를 데이터화하여 기록,
최종 지식 패키지 적재 (DB/Vector DB Write) |

### 4.2. 분석 단계

1. **Orchestrator**가 이슈를 수신하고 **Data monitor**에게 데이터 수집 지시.
2. **Data monitor**가 정제한 데이터를 바탕으로 **Stat analyzer**가 수치적 용의자(PARA/4M) 선별.
3. **Docs researcher**가 통계 결과와 일치하는 과거 사례 및 변경점 탐색.
4. **Strategy advisor**가 위 정보를 종합하여 시뮬레이션 후 최적의 Action 제안.

### 4.3. 지식 적재 단계

1. **Orchestrator**가 엔지니어로부터 "Option A가 성공적이었음"이라는 피드백 확인.
2. **Strategy advisor**가 본인이 제안했던 Option A의 세부 내용(예: "Focus Ring 교체")과 당시 예상했던 성공률 데이터 조회 및 전송.
3. **Data monitor**가 분석 시점에 장비 상태와 및 파라미터 등 데이터가 어땠는지 요약된 데이터 스냅샷을 전송.
4. **Strategy advisor**가 위 정보들을 다 모아서 이런 데이터 상황에서 “이런 통계 수치가 나왔을 때, Advisor가 제안한 이 조치가 실제로 성공했다"라는 완전한 형태의 지식을 DB에 적재.

### **4.4. 사용 시나리오**

**04:00 [Phase 1. 자율 분석 트리거 및 데이터 오케스트레이션]**
**상황:** Edge CD가 5.5%로 UCL 초과 알람 발생.

> • **Orchestrator (지휘):** 알람 수신 즉시 자율 분석 모드(Autonomous Mode)를 활성화합니다.
• **Data monitor (수집):** 문제 상황의 Route 정보, 4M 컨텍스트, 그리고 공정 내 수많은 센서 파라미터 등 파라미터 전체를 **No. 5, 30** 기능을 통해 즉시 스냅샷으로 확보합니다.
• **Docs researcher (맥락):** 최근 1주일간의 PM 이력과 레시피 변경 로그를 전수 조사하여 'Clean Log(변경점 없음)'임을 사전에 확정합니다.
> 

**04:05 [Phase 2. 다차원 통계 분석 및 후보군 전수 검증 (자율 수행)]**
**에이전트들이 사용자의 지시 없이 가용 가능한 모든 분석 도구를 병렬로 가동합니다.**

> • **Stat analyzer (분석):** * **1차 스크리닝:** 전 파라미터 대상 **No. 26(상관분석)** 실행. 물리 파라미터는 $r < 0.3$으로 유의미한 변수가 없음을 확인.
    ◦ **2차 확장 분석:** 4M 데이터(부품 Life, 교대조, 자재 로트)를 변수화하여 **ANOVA** 및 **상관분석** 수행.
    ◦ **결과 도출:** 'Focus Ring 누적 사용량'과 Edge CD 값 사이의 상관계수 $r = 0.95$를 포착.
• **Docs researcher (맥락):**  Stat analyzer가 찾아낸 'Focus Ring'을 키워드로 RAG 검색 실행.
    ◦ **No. 19(원인 코드)** 이력에서 동일한 Drift 패턴 시 'Focus Ring Aging'으로 조치했던 과거 사례 12건을 매칭 완료.
    ◦ BOM 정보를 조회하여 현재 부품 사용량이 수명 임계치(1,000매)의 98%인 980매임을 확인.
> 

**04:10 [Phase 3. 조치 시나리오 시뮬레이션 및 랭킹 확정 (자율 수행)]**

> • **Strategy advisor (전략):** * 식별된 원인(Focus Ring 노후화)에 대해 **No. 14(Rule Simulation)**를 가동.
    ◦ 부품 교체 시 다음 Lot에서 CD 값이 4.0%로 복귀될 확률($98\%$)과 교체하지 않을 시 다음 Lot에서 LCL/UCL 이탈 가속화 리스크를 수치화합니다.
> 

**08:30 [Phase 4. 최종 통합 분석 결과 브리핑]**
**엔지니어가 출근하여 대시보드를 열었을 때, 에이전트가 완료된 분석 리포트를 제시합니다.[이사현상 분석 보고서]**

> **Agent (Main):**
**1. 분석 결론**
• **주원인:** Etch 챔버 #A **Focus Ring 노후화** (신뢰도: 95%)
• **현상 요약:** 최근 3일간 지속된 Drift 패턴($Nelson \ Rule$ 3번 위반)은 설비 파라미터가 아닌 부품 소모에 의한 현상으로 판명됨.
**2. 통계적/객관적 근거**
• **상관관계:** Focus Ring 사용량 vs Edge CD 상관계수 $r = 0.95$ (Critical)
• **기준정보:** 현재 부품 사용량 980/1,000매 (수명 98% 경과)
• **이력 매칭:** 과거 동일 패턴 발생 시 부품 교체로 해결된 사례 12건 존재 (Clean Log 상황과 일치)
**3. 권고 조치 및 결과 예측**
• **최적 조치:** **Focus Ring 즉시 교체 (Option A)**
• **기대 효과:** 교체 즉시 CD 4.0% 복귀 예상 및 이후 500 Lot 이상 안정적 관리 가능.
• **미조치 리스크:** 작일 04:00 이후 CD 상승 기울기 $15\%$ 가속화 중, 차기 Lot에서 6.0% 초과 확실시됨.
**지금 바로 보전팀에 교체 작업을 의뢰할까요?**
> 

**13:00 [Phase 5. 조치 결과 검증 및 자동 지식화]**
**엔지니어의 승인 후 조치가 완료된 시점.**

> • **Orchestrator (지휘):** 조치 완료 신호를 수신하고 사후 모니터링 태스크를 가동합니다.
• **Data monitor (수집):** 조치 후 생산된 첫 번째 Lot의 데이터를 **No. 7** 기능으로 자동 트래킹. CD 값이 4.02%로 정상 복귀됨을 확인.
• **Docs researcher (적재):** 이번 분석의 전체 프로세스(`Drift 감지 -> 4M 상관분석 -> Focus Ring 특정 -> 교체 성공`)를 지식 보고서로 구성하여 **No. 19 원인 코드** 업데이트 및 Vector DB 및 RDB에 자동 적재.
> 

---

## 5. 구조 설계(System flow)

![Mermaid Chart - Create complex, visual diagrams with text.-2026-02-04-045034.png](attachment:8db35d0f-1082-4753-9c93-86eb0888bed4:Mermaid_Chart_-_Create_complex_visual_diagrams_with_text.-2026-02-04-045034.png)

---

## 6. 개발 계획(WBS)

4월 29일 최종 배포까지 매월 1회씩 총 3번의 월간 스프린트(Sprint)로 나누어 진행예정

| **기간** | **목표** | **Content** |
| --- | --- | --- |
| **1/20 ~ 2/20** | **PoC** | • 장비 파트 노후화 시나리오 완벽 구현
• Docker/DB 및 기본 아키텍처 구축
• Dummy Data 생성 및 검증 성공 |
| **2/21 ~ 3/20** | **범용성 확장** | • 시나리오 추가
• **RAG 확장** (과거 이력 기반의 조치방안 추천 등)
• 통계 분석 도구 다양화 |
| **3/21 ~ 4/20** | **고도화 및 배포** | • 에러 핸들링 및 예외 처리
• 최종 배포 및 데모 시연 준비 |
| **4/21 ~ 4/29** | **Sales pack 준비** |  |